import axios from 'axios'
import React, { useEffect, useState } from 'react'
import { useParams } from 'react-router-dom'
import { apiURL } from '../../utils/proxy'
import { primaryColor } from '../../components/common/commonStyles'
import Result from '../result/Result'

const VerificationPage = () => {

    const [props, setProps] = useState()

    const { code } = useParams()

    useEffect(() => {
        axios.get(apiURL + "/user/emailToken/" + code)
        .then(res => {
            setProps({
                svg: (
                    <svg width="78" height="74" viewBox="0 0 78 74" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M78 36.9823L69.3491 27.1534L70.5545 14.1424L57.7555 11.2432L51.0545 0L39 5.16197L26.9455 0L20.2445 11.2432L7.44545 14.107L8.65091 27.118L0 36.9823L8.65091 46.8113L7.44545 59.8576L20.2445 62.7568L26.9455 74L39 68.8027L51.0545 73.9646L57.7555 62.7215L70.5545 59.8223L69.3491 46.8113L78 36.9823ZM31.9091 54.6603L17.7273 40.5179L22.7264 35.5327L31.9091 44.6546L55.2736 21.355L60.2727 26.3755L31.9091 54.6603Z" fill={primaryColor} />
                    </svg>
                ),
                title: 'Se ha verificado tu email',
                desc: 'Ya puedes cerrar esta pestaÃ±a...'
            })
        })
        .catch(err => {
            setProps({
                svg: (
                    <svg width="78" height="75" viewBox="0 0 78 75" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fillRule="evenodd" clipRule="evenodd" d="M78 37.7458L69.3491 27.9167L70.5551 14.9057L57.7549 12.0066L51.0551 0.763443L39 5.92531L26.9448 0.763443L20.2451 12.0066L7.4448 14.8703L8.65085 27.8816L-3.05176e-05 37.7458L8.65085 47.5747L7.4448 60.6211L20.2451 63.5202L26.9448 74.7634L39 69.5661L51.0551 74.728L57.7549 63.4848L70.5551 60.5857L69.3491 47.5747L78 37.7458ZM45.8877 25.5276C44.8706 25.5276 43.9776 25.856 43.2549 26.5271L43.2451 26.5362C42.521 27.2349 42.1563 28.1165 42.1563 29.1338C42.1563 30.1431 42.5044 31.022 43.2051 31.7227L43.2139 31.7315C43.5674 32.0723 43.9649 32.3282 44.3999 32.5008C44.8565 32.6819 45.3545 32.7713 45.8877 32.7713C46.9258 32.7713 47.8321 32.4319 48.5562 31.7361C49.2901 31.052 49.6499 30.1646 49.6499 29.1338C49.6499 28.1165 49.2852 27.2349 48.5611 26.5362L48.5513 26.5271C47.8252 25.8528 46.9199 25.5276 45.8877 25.5276ZM33.7627 25.5276C32.73 25.5276 31.8247 25.8528 31.0987 26.5271L31.0889 26.5362C30.3648 27.2349 30 28.1165 30 29.1338C30 30.1512 30.3648 31.033 31.0889 31.7315C31.814 32.4305 32.7222 32.7713 33.7627 32.7713C34.8028 32.7713 35.711 32.4305 36.4361 31.7315C37.1602 31.033 37.5249 30.1512 37.5249 29.1338C37.5249 28.1165 37.1602 27.2349 36.4361 26.5362L36.4263 26.5271C35.7002 25.8528 34.7949 25.5276 33.7627 25.5276ZM27.1548 43.6787L27.1582 43.6863L27.1616 43.6939C27.4116 44.2574 27.8579 44.6443 28.438 44.8492C28.6753 44.9373 28.9224 44.9847 29.1763 44.9847C29.5156 44.9847 30.1455 45.0013 32.1455 44.7988C39.0616 44.0987 43.5573 45.7284 49.7382 48.8188L49.75 48.8247L49.7617 48.8301C49.9218 48.9028 50.0864 48.9587 50.2544 48.9958C50.413 49.0307 50.5747 49.0491 50.7392 49.0491C50.9946 49.0491 51.2436 49.001 51.4829 48.9114C52.0498 48.7021 52.477 48.3108 52.7226 47.7583L52.7255 47.7507L52.729 47.7431C52.8623 47.4231 52.9389 47.092 52.9389 46.7554C52.9389 46.4902 52.895 46.2295 52.811 45.9761C52.6142 45.3618 52.2081 44.9325 51.666 44.5771C45.2518 40.3725 39.5114 40 32.1455 40C31.6455 40 28.1455 39.9646 27.0747 41.8707C27.0347 41.9903 27.0034 42.1477 26.9814 42.2703C26.957 42.409 26.9448 42.5494 26.9448 42.691C26.9448 43.0276 27.0215 43.3587 27.1548 43.6787Z" fill={primaryColor} />
                    </svg>
                ),
                title: 'Lo sentimos',
                desc: 'Parece que ha habido un problema'
            })
        })
    },[])

    return (
        props && <Result {...props} />
    )
}

export default VerificationPage